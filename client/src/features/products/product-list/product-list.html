<div class="min-h-screen bg-gray-50">
  <!-- Mobile filters toggle -->
  <div class="md:hidden p-4 bg-white border-b border-gray-200 sticky top-0 z-10">
    <button 
      class="flex items-center gap-2 px-4 py-2 bg-gray-100 border border-gray-300 rounded-md text-sm font-medium cursor-pointer transition-all duration-200 hover:bg-gray-200"
      (click)="toggleMobileFilters()">
      <span>햓햦햩혧혝혦</span>
      @if (currentFilters() && hasActiveFilters(currentFilters())) {
        <span class="bg-blue-500 text-white text-xs font-semibold px-2 py-1 rounded-full min-w-[18px] text-center">
          {{ getActiveFiltersCount() }}
        </span>
      }
    </button>
  </div>

  <!-- Main layout -->
  <div class="flex min-h-[calc(100vh-60px)]">
    <!-- Filters Sidebar -->
    <aside 
      class="w-72 bg-white border-r border-gray-200 h-screen overflow-y-auto z-20 
             md:sticky md:top-0 md:block 
             fixed top-0 -translate-x-full md:translate-x-0 filters-sidebar max-w-xs md:max-w-none"
      [class.translate-x-0]="isMobileFiltersOpen()">
      <app-product-filters 
        (filtersChanged)="onFiltersChanged($event)">
      </app-product-filters>
    </aside>

    <!-- Products Content -->
    <main class="flex-1 p-6 max-w-[calc(100%-18rem)] md:max-w-none">
      <!-- Results header -->
      <div class="flex justify-between items-center mb-6 pb-4 border-b border-gray-200 
                  flex-col md:flex-row md:items-center gap-2 md:gap-0">
        <h2 class="font-bold text-gray-900 m-0 text-lg md:text-2xl">햌햟혝햟햩쮏 혝쮏쒫썜쮏</h2>
        @if (isLoading()) {
          <div class="text-sm text-gray-500">행햟햡혞향햨햟...</div>
        } @else if (pagedResult()) {
          <div class="text-sm text-gray-500">
            햏햟햧햢햣햫 혝쮏쒫썜쮏: {{ pagedResult()!.count }}
          </div>
        }
      </div>

      <!-- Products Grid -->
      @if (isLoading()) {
        <div class="flex flex-col items-center justify-center py-16 px-6 text-center">
          <div class="w-10 h-10 border-2 border-gray-200 border-t-blue-500 rounded-full loading-spinner mb-4"></div>
          <p class="text-gray-500 text-base m-0">행햟햡혞향햨햟 쮏얨햨혝쮏...</p>
        </div>
      } @else if (pagedResult() && pagedResult()!.data.length === 0) {
        <div class="flex flex-col items-center justify-center py-16 px-6 text-center">
          <div class="text-6xl mb-4 opacity-50">游닍</div>
          <h3 class="text-xl font-semibold text-gray-700 m-0 mb-2">햑쮏쒫썜혦 햫햣 햫햟햧햢햣햫혦</h3>
          <p class="text-sm text-gray-500 m-0">쮏쮏쐄햧혝햣 햦향햪햣햫햦혝혧 햟햟햪햣혝혦 혟햦햩혧혝햟혡햦햦</p>
        </div>
      } @else if (pagedResult()) {
        <div class="products-grid gap-4 lg:gap-3 md:gap-3 sm:gap-2">
          @for (product of pagedResult()!.data; track product.id) {
            <app-product-card [product]="product"/>
          }
        </div>
        
        <!-- 햟햡햦햫햟혡햦혪 -->
        <app-pagination 
          [pagedData]="pagedResult()!"
          (pageChanged)="onPageChanged($event)"
          (pageSizeChanged)="onPageSizeChanged($event)">
        </app-pagination>
      }
    </main>
  </div>

  <!-- Mobile filters overlay -->
  @if (isMobileFiltersOpen()) {
    <div 
      class="md:hidden fixed inset-0 bg-black bg-opacity-50 z-15 mobile-overlay"
      (click)="toggleMobileFilters()">
    </div>
  }
</div>