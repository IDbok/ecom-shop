<app-image-upload (uploadFile)="onUploadImage($event)" [loading]="loading()" />

@if (photos(); as photos) {
  @if (photos.length > 0) {
    <div class="grid grid-cols-4 auto-rows-min gap-3 p-5 h-[65vh] overflow-auto">
      @for(photo of photos; track photo.id) {
        <div class="relative">
          <img 
            src="{{photo.url}}" 
            alt="photo of product" 
            class="w-full rounded-lg cursor-pointer hover:opacity-90 transition-opacity" 
            (click)="openImageModal(photo)" />
          
          @if (deleting() === photo.id) {
            <div class="absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center rounded-lg">
              <div class="loading loading-spinner loading-lg text-white"></div>
            </div>
          }
          
          <app-star-button
            [disabled]="photo.url === productService.currentProduct()?.imageUrl || deleting() === photo.id"
            [selected]="photo.url === productService.currentProduct()?.imageUrl"
            (clickEvent)="setMainPhoto(photo)"
          />
          
          <app-delete-button
            [disabled]="photo.url === productService.currentProduct()?.imageUrl || deleting() === photo.id"
            (clickEvent)="deletePhoto(photo)"
          />
        </div>
      }
    </div>
  } @else {
    <div class="flex flex-col items-center justify-center h-[65vh]">
      <span class="text-lg">No photos uploaded yet.</span>
      <span class="text-sm text-gray-500 mt-2">Upload your first product photo above</span>
    </div>
  }
}

